"use strict";const toolBar=document.getElementById("toolbar");var DrawingElementType;!function(e){e.controller="controller",e.pencil="pencil",e.eraser="eraser",e.colorPicker="colorPicker",e.lineWidth="lineWidth",e.clearCanvas="clearCanvas"}(DrawingElementType||(DrawingElementType={}));class DrawingCanvas{constructor(e,t){this.defaultStore=()=>{const e=document.getElementById("toolbar");e&&(this.controller=e);const t=document.getElementById("pencil");t&&(this.pencil=t);const s=document.getElementById("eraser");s&&(this.eraser=s);const i=document.getElementById("color");i&&(this.colorPicker=i);const n=document.getElementById("lineWidth");n&&(this.lineWidthPicker=n);const c=document.getElementById("clear");c&&(this.clearCanvas=c)},this.storeElements=e=>{switch(e.type){case"controller":if(e.className){const t=document.querySelector("."+e.className);this.controller=t}if(e.id){const t=document.getElementById(e.id);this.controller=t}if(e.className&&e.id){const t=document.getElementById(e.id);this.controller=t}break;case"pencil":if(e.className){const t=document.querySelector("."+e.className);this.pencil=t}if(e.id){const t=document.getElementById(e.id);this.pencil=t}if(e.className&&e.id){const t=document.getElementById(e.id);this.pencil=t}break;case"eraser":if(e.className){const t=document.querySelector("."+e.className);this.eraser=t}if(e.id){const t=document.getElementById(e.id);this.eraser=t}if(e.className&&e.id){const t=document.getElementById(e.id);this.eraser=t}break;case"colorPicker":if(e.className){const t=document.querySelector("."+e.className);this.colorPicker=t}if(e.id){const t=document.getElementById(e.id);this.colorPicker=t}if(e.className&&e.id){const t=document.getElementById(e.id);this.colorPicker=t}break;case"lineWidth":if(e.className){const t=document.querySelector("."+e.className);this.lineWidthPicker=t}if(e.id){const t=document.getElementById(e.id);this.lineWidthPicker=t}if(e.className&&e.id){const t=document.getElementById(e.id);this.lineWidthPicker=t}break;case"clearCanvas":if(e.className){const t=document.querySelector("."+e.className);this.clearCanvas=t}if(e.id){const t=document.getElementById(e.id);this.clearCanvas=t}if(e.className&&e.id){const t=document.getElementById(e.id);this.clearCanvas=t}}},this.changeHandler=e=>{const t=this.colorPicker,s=this.lineWidthPicker,i=e.target,n=this.context;t&&(i.id&&i.id===t.id||i.className&&i.className===t.className)&&(n.strokeStyle=i.value),s&&(i.id&&i.id===s.id||i.className&&i.className===s.className)&&(n.lineWidth=Number(i.value))},this.clickHandler=e=>{const t=this.pencil,s=this.eraser,i=this.clearCanvas,n=this.context,c=e.target;i&&(c.id&&c.id===i.id||c.className&&c.className===i.className)&&n.clearRect(0,0,this.canvas.width,this.canvas.height),t&&(c.id&&c.id===t.id||c.className&&c.className===t.className)&&(null==s||s.classList.remove("active"),this.shouldErase=!1,this.shouldDraw=!0,null==t||t.classList.add("active")),s&&(c.id&&c.id===s.id||c.className&&c.className===s.className)&&(null==t||t.classList.remove("active"),this.shouldDraw=!1,this.shouldErase=!0,null==s||s.classList.add("active"))},this.start=e=>{const t=e.touches?e.touches[0]:e;this.shouldErase?(this.context.globalCompositeOperation="destination-out",this.isErasing=!0,this.isDrawing=!1):(this.context.globalCompositeOperation="source-over",this.isDrawing=!0,this.isErasing=!1);t.clientX,this.canvas.offsetLeft,t.clientY,this.canvas.offsetTop},this.stop=()=>{this.isDrawing=!1,this.isErasing=!1,this.context.stroke(),this.context.beginPath()},this.draw=e=>{if(!this.isDrawing&&!this.isErasing)return;const t=e.touches?e.touches[0]:e;this.context.lineCap="round",this.context.lineTo(t.clientX-this.canvas.offsetLeft,t.clientY-this.canvas.offsetTop),this.context.stroke()};const s=document.getElementById(e),i=s.getContext("2d");this.defaultStore(),(null==t?void 0:t.elements)&&t.elements.forEach((e=>this.storeElements(e))),(null==t?void 0:t.width)?s.width=t.width:s.width=window.innerWidth-s.offsetLeft,(null==t?void 0:t.height)?s.height=t.height:s.height=window.innerHeight-s.offsetTop,this.canvas=s,this.context=i,this.context.lineWidth=5,this.context.strokeStyle="black",this.listen()}listen(){const e=this.canvas,t=this.controller;e.addEventListener("mousedown",this.start),e.addEventListener("mouseup",this.stop),e.addEventListener("mousemove",this.draw),e.addEventListener("touchstart",this.start),e.addEventListener("touchend",this.stop),e.addEventListener("touchmove",this.draw),t&&(t.addEventListener("change",this.changeHandler),t.addEventListener("click",this.clickHandler))}log(){return console.log(this.canvas)}}new DrawingCanvas("drawing-board",{elements:[{type:DrawingElementType.pencil,className:"pen"}]});
//# sourceMappingURL=index.4f67c116.js.map
